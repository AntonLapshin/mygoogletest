/*
     TrafficCop
     Author: Jim Cowart
     License: Dual licensed MIT (http://www.opensource.org/licenses/mit-license) & GPL (http://www.opensource.org/licenses/gpl-license)
     Version 0.3.0
     */

/*
     infuser.js
     Author: Jim Cowart
     License: Dual licensed MIT (http://www.opensource.org/licenses/mit-license) & GPL (http://www.opensource.org/licenses/gpl-license)
     Version 0.2.0
     */

// Knockout External Template Engine
// Author: Jim Cowart
// License: MIT (http://www.opensource.org/licenses/mit-license)
// Version 2.0.4

define("TrafficCop",["jquery"],function(e){var t={};return e.trafficCop=function(n,r){var i=n,s;arguments.length===2&&(i=e.extend(!0,r,{url:n})),s=JSON.stringify(i);if(s in t)for(var o in{success:1,error:1,complete:1})t[s][o](i[o]);else t[s]=e.ajax(i).always(function(){delete t[s]});return t[s]},e.trafficCop}),define("infuser",["jquery","TrafficCop"],function(e,t,n,r){var i={templates:{},storeTemplate:function(e,t){this.templates[e]=t},getTemplate:function(e){return this.templates[e]},purge:function(){this.templates={}}},s={templateIds:[],storeTemplate:function(e,t){var n=document.getElementById(e);n===null&&(this.templateIds.push(e),n=document.createElement("script"),n.type="text/html",n.id=e,document.body.appendChild(n)),n.text=t},getTemplate:function(e){return document.getElementById(e)},purge:function(){for(var e=0;e<this.templateIds.length;e++)document.body.removeChild(document.getElementById(this.templateIds[e]));this.templateIds=[]}},o="<div class='infuser-error'>The template <a href='{TEMPLATEURL}'>{TEMPLATEID}</a> could not be loaded. {STATUS}</div>",u=function(e,t,n){return o.replace("{STATUS}",e).replace("{TEMPLATEID}",t).replace("{TEMPLATEURL}",n)},a=[],f={getTemplatePath:function(e){var t=e.templatePrefix+e.templateId+e.templateSuffix;return e.templateUrl===r||e.templateUrl===""?t:e.templateUrl+"/"+t},templateGetSuccess:function(e,t){return function(n){var r=c.defaults.templatePreProcessor(n);c.store.storeTemplate(e,r),t(c.store.getTemplate(e))}},templateGetError:function(t,n,r){return function(i){e.inArray(t,a)===-1&&a.push(t);var s=u("HTTP Status code: "+i.status,t,n);c.store.storeTemplate(t,s),r(c.store.getTemplate(t))}},getAjaxOptions:function(e){}},l=["target","loadingTemplate","postRender","preRender","render","bindingInstruction","useLoadingTemplate","model","templateUrl","templateSuffix","templatePrefix",""],c={storageOptions:{hash:i,script:s},store:i,defaults:{templateUrl:"",templateSuffix:".html",templatePrefix:"",templatePreProcessor:function(e){return e},ajax:{async:!0,dataType:"html",type:"GET"},target:function(e){return"#"+e},loadingTemplate:{content:'<div class="infuser-loading">Loading...</div>',transitionIn:function(t,n){var r=e(t);r.hide(),r.html(n),r.fadeIn()},transitionOut:function(t){e(t).html("")}},postRender:function(e){},preRender:function(e,t){},render:function(t,n){var r=e(t);r.children().length===0?r.append(e(n)):r.children().replaceWith(e(n))},bindingInstruction:function(e,t){return e},useLoadingTemplate:!0},get:function(t,n){var r=e.extend({},c.defaults,typeof t=="object"?t:{templateId:t}),i;r.ajax.url=f.getTemplatePath(r),i=c.store.getTemplate(r.ajax.url),!i||e.inArray(r.ajax.url,a)!==-1?(r.ajax.success=f.templateGetSuccess(r.ajax.url,n),r.ajax.error=f.templateGetError(r.templateId,r.ajax.url,n),e.trafficCop(r.ajax)):n(i)},getSync:function(t){var n=e.extend({},c.defaults,typeof t=="object"?t:{templateId:t},{ajax:{async:!1}}),r,i;n.ajax.url=f.getTemplatePath(n),r=c.store.getTemplate(n.ajax.url);if(!r||e.inArray(n.ajax.url,a)!==-1)i=null,n.ajax.success=function(e){i=e},n.ajax.error=function(t){e.inArray(n.ajax.url)===-1&&a.push(n.ajax.url),i=u("HTTP Status code: exception.status",n.templateId,n.ajax.url)},e.ajax(n.ajax),i===null?i=u("An unknown error occurred.",n.templateId,n.ajax.url):(c.store.storeTemplate(n.ajax.url,i),r=c.store.getTemplate(n.ajax.url));return r},infuse:function(t,n){var i=e.extend({},c.defaults,typeof t=="object"?t:n,typeof t=="string"?{templateId:t}:r),s=typeof i.target=="function"?i.target(t):i.target;i.useLoadingTemplate&&i.loadingTemplate.transitionIn(s,i.loadingTemplate.content),c.get(i,function(e){var t=e;i.preRender(s,t),t=i.bindingInstruction(t,i.model),i.useLoadingTemplate&&i.loadingTemplate.transitionOut(s),i.render(s,t),i.postRender(s)})}};return c}),define("koext",["jquery","ko","infuser"],function(e,t,n){var r=function(e,r){var i=this,s;i.templateId=e,i.loaded=!1,i.template=t.observable(n.defaults.useLoadingTemplate?n.defaults.loadingTemplate.content:undefined),i.template.data={},i.options=t.utils.extend({},r),i.options.templateId=e,i.options&&i.options.afterRender&&(s=i.options.afterRender,i.options.afterRender=function(){i.loaded&&s.apply(i.options,arguments)})};t.utils.extend(r.prototype,{data:function(e,t){if(arguments.length===1)return e==="precompiled"&&this.template(),this.template.data[e];this.template.data[e]=t},text:function(e){this.loaded||this.getTemplate();if(arguments.length===0)return this.template();this.template(arguments[0])},getTemplate:function(){var e=this;n.get(e.options,function(t){e.data("precompiled",null),e.template(t),e.loaded=!0})}});var i=function(e){var n=e?new e:new t.nativeTemplateEngine;return n.templates={},n.makeTemplateSource=function(e,i,s){if(typeof e=="string"){var o=document.getElementById(e);return o?new t.templateSources.domElement(o):(n.templates[e]||(n.templates[e]=new r(e,s)),n.templates[e])}if(e.nodeType==1||e.nodeType==8)return new t.templateSources.anonymousTemplate(e)},n.renderTemplate=function(e,t,r){var i=n.makeTemplateSource(e,t,r);return n.renderTemplateSource(i,t,r)},n};t.KoExternalTemplateEngine=i,e.tmpl&&e.tmpl.tag.tmpl.open.toString().indexOf("__")>=0?t.setTemplateEngine(new i(t.jqueryTmplTemplateEngine)):t.setTemplateEngine(new i)}),define("js/vk",[],function(){function e(e){return"https://pp.vk.me/c"+e.replace("http://cs","").replace(".vk.me","")}function t(t){return{id:t.uid||t.id,img:e(t.photo_50),name:t.first_name+" "+t.last_name}}return{invite:function(){VK.callMethod("showInviteBox")},getUser:function(e,n){VK.api("users.get",{user_ids:e,fields:"photo_50",name_case:"Nom"},function(e){var r=e.response,i=t(r[0]);n(i)})},getUsers:function(e,n){VK.api("users.get",{user_ids:e,fields:"photo_50",name_case:"Nom"},function(e){var r=e.response,i=[];for(var s=0;s<r.length;s++)i.push(t(r[s]));n(i)})},getFriendsUsers:function(e){var t=this;VK.api("friends.getAppUsers",function(t){var n=t.response;if(n.length===0){e([]);return}e(n)})}}}),define("model/results",[],function(){return console.log("questions"),[{img:"http://cs613418.vk.me/v613418333/c369/9-R3onpwk1A.jpg",name:"Уборщик",desc:"В принципе, вы можете устроиться на работу в Google, но ваши знания и навыки будут использоваться для выполнения самой простой работы, например мытья полов или приготовления кофе."},{img:"http://cs613418.vk.me/v613418333/c369/9-R3onpwk1A.jpg",name:"Мойщик полов",desc:"В принципе, вы можете устроиться на работу в Google, но ваши знания и навыки будут использоваться для выполнения самой простой работы, например мытья полов или приготовления кофе."},{img:"http://cs613418.vk.me/v613418333/c369/9-R3onpwk1A.jpg",name:"Разносчик кофе",desc:"В принципе, вы можете устроиться на работу в Google, но ваши знания и навыки будут использоваться для выполнения самой простой работы, например мытья полов или приготовления кофе."},{img:"http://cs613418.vk.me/v613418333/c369/9-R3onpwk1A.jpg",name:"Младший помощник",desc:"В принципе, вы можете устроиться на работу в Google, но ваши знания и навыки будут использоваться для выполнения оперативной работы."},{img:"http://cs613418.vk.me/v613418333/c370/wsIYGRvRSRI.jpg",name:"Менеджер",desc:"Вы типичный гуманитарий. Такие сотрудники тоже нужны в Google, но далее административно-хозяйственного отдела вас вряд ли допустят. Вам придется перекладывать бумаги, встречаться с клиентами или организовывать кофе-брейки на конференциях разработчиков."},{img:"http://cs613418.vk.me/v613418333/c370/wsIYGRvRSRI.jpg",name:"Организатор конференций",desc:"Вы типичный гуманитарий. Такие сотрудники тоже нужны в Google, но далее административно-хозяйственного отдела вас вряд ли допустят. Вам придется перекладывать бумаги, встречаться с клиентами или организовывать кофе-брейки на конференциях разработчиков."},{img:"http://cs613418.vk.me/v613418333/c377/-Yv95voqqL0.jpg",name:"Программист",desc:"Вы, безусловно, талантливы, но вам недостает внимательности к деталям. Google принял бы вас на работу на одну из стартовых позиций. Так у вас появится шанс проявить себя в первые месяцы работы и получить заслуженное продвижение."},{img:"http://cs613418.vk.me/v613418333/c377/-Yv95voqqL0.jpg",name:"ТОП-менеджер",desc:"Вы, безусловно, талантливы. Google принял бы вас на работу на одну из ведущих позиций."},{img:"http://cs613418.vk.me/v613418333/c37e/4_6reEAXhCU.jpg",name:"Директор направления",desc:"Считайте, что вы приняты. HR-менеджер Google воодушевлен вашими результатами Таким людям, как вы, доверят строить будущее компании. Если вы не подсмотрели правильные ответы, конечно."},{img:"http://cs613418.vk.me/v613418333/c37e/4_6reEAXhCU.jpg",name:"CEO",desc:"Считайте, что вы приняты. HR-менеджер Google воодушевлен вашими результатами Таким людям, как вы, доверят строить будущее компании. Если вы не подсмотрели правильные ответы, конечно."},{img:"http://cs613418.vk.me/v613418333/c385/DRd9UN3seak.jpg",name:"Глава компании",desc:"Считайте, что вы приняты. HR-менеджер Google воодушевлен вашими результатами Таким людям, как вы, доверят строить будущее компании. Если вы не подсмотрели правильные ответы, конечно."}]}),define("vm/top-item",["ko","js/vk","model/results"],function(e,t,n){function r(r){var i=this;this.player=e.observable(),this.score=e.observable(0),this.post=e.computed(function(){return this.score()===0?"Тест не пройден":n[Math.floor(this.score()/1e3)].name},this),this.starSrc="https://pp.vk.me/c620622/v620622333/9994/3XuLiq4H_vw.jpg",this.onClick=function(){if(i.player().id==0){t.invite();return}var e="https://vk.com/id"+i.player().id,n=window.open(e,"_blank");n.focus()},this.set=function(e){i.player(e),i.score(e.score)},this.set(r)}return console.log("top-item"),r}),define("js/ajax",["jquery"],function(e){function i(e,r){var i=t+e+"?";if(r!=null)for(var s in r)i=i+s+"="+r[s]+"&";return i+=n,i}console.log("ajax");var t="https://mygoogletestdb.herokuapp.com/",n="callback=?",r=5e4;return{callAjax:function(t,n,s,o){e.ajax({url:i(t,n),type:"GET",dataType:"json",timeout:r,success:function(e){e.error!=undefined?(console.log(e.error),o!=undefined&&o()):s(e)},error:function(){console.log("Ошибка сервера, попробуйте еще раз."),o!=undefined&&o()},complete:function(){}})}}}),define("model/player",[],function(){var e="https://vk.com/images/deactivated_50.gif",t=[{id:1854,img:"https://pp.vk.me/c312816/v312816854/418e/Dj_b1-tDbnA.jpg",name:"Александр Митьков",score:"Глава компании (1590)"},{id:83683296,img:"https://pp.vk.me/c306201/v306201296/68f4/miitl2DFNNU.jpg",name:"Олег Павленко",score:"Глава компании (1470)"},{id:40513911,img:"https://pp.vk.me/c617821/v617821911/d788/Nt_qvJkP1dw.jpg",name:"Татьяна Кнауб",score:"CEO (1330)"},{id:68369564,img:"https://pp.vk.me/c313126/v313126564/87f2/uBvNbtCPVII.jpg",name:"Слава Гущин",score:"CEO (1290)"},{id:157853322,img:"https://pp.vk.me/c617217/v617217322/8577/cAb_KGEGp5Q.jpg",name:"Женя Миронов",score:"CEO (1270)"},{id:24256368,img:"https://pp.vk.me/c619420/v619420368/626c/TeI0Oer8zL4.jpg",name:"Кристинка Ткаченко",score:"CEO (1203)"},{id:56571440,img:"https://pp.vk.me/c411816/v411816440/9424/pZvOayDFFcA.jpg",name:"Анатолий Красавчик Попов",score:"CEO (1190)"},{id:119006596,img:"https://pp.vk.me/c617827/v617827596/a922/fHXptl7p_58.jpg",name:"Жека Клюшников",score:"CEO (1180)"}];return{getStaticTop:function(){var e=[];for(var n=0;n<t;n++){var r=t[n];e.push(this.player(r.id,r.img,r.name,r.score))}},playerInvite:function(){return{id:"0",img:e,name:"Пригласить друга",score:0}},playerLoading:function(){return{id:"0",img:e,name:"Загружается",score:0}},player:function(e,t,n,r){return{id:e,img:t,name:n,score:r}}}}),define("js/players",["js/ajax","js/vk","model/player"],function(e,t,n){function r(e,t){return n.player(e.id,e.img,e.name,t)}function i(e,n,i){var s=[];t.getUsers(e,function(e){var t=[];for(var s=0;s<e.length;s++)t.push(r(e[s],n[e[s].id]));i(t)})}function s(e,t){var n={};for(var r=0;r<e.length;r++)n[e[r]]=t[e[r]]||0;return n}function o(e){var t={};for(var n=0;n<e.length;n++)t[e[n]._id]=e[n].score;return t}return console.log("vk"),{getOnePlayer:function(n,i){var s=this;t.getUser(n,function(t){e.callAjax("scores",{ids:[t.id]},function(e){var n=e.length===1?e[0].score:0,s=r(t,n);i(s)})})},getTopPlayers:function(t){e.callAjax("top",null,function(e){var n=[],r=o(e);for(var u=0;u<e.length;u++)n.push(e[u]._id);var a=n.join(","),f=s(n,r);i(a,f,t)})},getFriendsPlayers:function(n){t.getFriendsUsers(function(t){if(t.length===0){n([]);return}e.callAjax("scores",{ids:t},function(e){var r=o(e),u=t.join(","),a=s(t,r);i(u,a,n)})})}}}),define("vm/top",["ko","vm/top-item","js/players","model/player"],function(e,t,n,r){function s(e){return new t(e)}function o(e,t){return t.score()-e.score()}var i=8,u={isVisible:e.observable(!1),players:e.observableArray(),myself:null,allTop:[],friendsTop:[],setVisiblePlayers:function(e){e.sort(o),this.players(e)},sort:function(){this.setVisiblePlayers(this.players())},toAllTop:function(){var e=this;if(this.allTop.length===0){var t=[];n.getTopPlayers(function(n){for(var o=0;o<i;o++){n[o]&&(n[o].place=o);var u=n[o]?s(n[o]):s(r.playerInvite());t.push(u)}e.allTop=t,e.setVisiblePlayers(e.allTop)})}else e.setVisiblePlayers(this.allTop)},toFriendsTop:function(){var e=this;if(this.friendsTop.length===0){var t=[];n.getFriendsPlayers(function(n){t.push(e.myself);for(var o=0;o<i-1;o++){var u=n[o]?s(n[o]):s(r.playerInvite());t.push(u)}e.friendsTop=t,e.setVisiblePlayers(e.friendsTop)})}else e.setVisiblePlayers(this.friendsTop)}};return u.toAllTop(),u}),define("vm/intro",["ko"],function(e){console.log("intro");var t={isVisible:e.observable(!1),header:"Тест: Примут ли тебя в Google?",desc:"При приеме на работу в Google соискателей ждут каверзные вопросы, многочасовые собеседования и непредсказуемый результат. Узнайте, достаточно ли у вас знаний о природе вещей, чтобы работать в этой компании.",callback:null,start:function(){var e=this;setTimeout(function(){e.isVisible(!1),e.callback()},300)}};return t}),define("model/questions",[],function(){return console.log("questions"),[{desc:"Если ветер все время дует с востока на запад, полет из Москвы в Нью-Йорк и обратно в сумме займет больше, меньше или столько же времени, чем в безветренную погоду?",img:"http://cs613418.vk.me/v613418333/c323/_2mneprbB2o.jpg",answers:["Больше","Меньше","Столько же"],right:"Больше",explain:"Коэффициент лобового сопротивления возрастает нелинейно с увеличением скорости, поэтому проигрыш от встречного ветра всегда будет больше выигрыша от попутного."},{desc:"Какое минимальное число надрезов ножом необходимо, чтобы разделить пачку масла на 27 кусочков?",img:"http://cs613418.vk.me/v613418333/c32a/M9twQectayA.jpg",answers:["10","12","8","6"],right:"6",explain:"Каждую «целую» грань куска масла нужно разделить двумя надрезами на три части."},{desc:"В 15:15 какой угол образуют минутная и часовая стрелки?",img:"http://cs613418.vk.me/v613418333/c331/8a5RwGjnorE.jpg",answers:["0","7,5","6","5,5"],right:"7,5",explain:"Часовая стрелка сместится на 1/4 часа от цифры 3, что составляет 360/12/4 градусов."},{desc:"У вас есть стопка монет высотой со 100-этажный дом. Поместятся ли эти монеты у вас в комнате?",img:"http://cs613418.vk.me/v613418333/c338/CVBqhgD_o6A.jpg",answers:["Да","Нет","Зависит от высоты потолков и размеров комнаты"],right:"Да",explain:"Стопка со 100-этажный дом может быть разбита на 100 стопок высотой в один этаж каждая. 100 стопок – это площадь квадрата 10 х 10 монет, такой квадрат можно разместить в любой комнате."},{desc:"Перед вами три закрытых ящика. В одном яблоки, в другом апельсины, в третьем – яблоки и апельсины вперемешку. На каждом из них табличка с названием – «яблоки», «апельсины» или «микс». Но все таблички перепутались местами. Можно ли, не заглядывая в коробку, вытянуть фрукт и, посмотрев на него, тут же правильно разместить таблички на всех трех коробках?",img:"http://cs613418.vk.me/v613418333/c33f/hUg9tISsY3E.jpg",answers:["Да","Нет"],right:"Да",explain:"Решение сводится к тому, чтобы определить, насколько соответствует содержимое одного ящика его надписи, и в зависимости от этого поменять местами надписи на двух других."},{desc:"Вы плаваете в лодке в бассейне. В лодке лежит кирпич. Если кирпич выбросить в бассейн, что произойдет с уровнем воды?",img:"http://cs613418.vk.me/v613418333/c346/t2bFbGaxSf0.jpg",answers:["Повысится","Не изменится","Понизится"],right:"Понизится",explain:"Находясь в лодке, кирпич вытесняет объем воды X, которая весит столько же, сколько он сам. В то время как в погруженном состоянии он выталкивает объем воды Y, равный своему объему. Объем кирпича (Y) меньше, чем объем воды того же веса (X), из-за разницы в плотности кирпича и воды. Поэтому лежащий на дне кирпич вытесняет меньше воды, чем кирпич в лодке."},{desc:"Перед вами три коробки, в одной из которых приз. Вы можете выбрать одну коробку из трех. После этого вам откроют пустую из двух оставшихся и предложат пересмотреть свой выбор. Что выгоднее?",img:"http://cs613418.vk.me/v613418333/c34d/vGYQCbfJy7M.jpg",answers:["Выбрать другую коробку","Оставить выбор"],right:"Выбрать другую коробку",explain:"Выгоднее выбрать другую коробку, так как при первоначальном выборе вероятность выигрыша была 1/3, а после того как ведущий открыл одну из коробок, вероятность выигрыша при выборе другой коробки увеличилась."},{desc:"Вы садитесь на горнолыжный подъемник, чтобы подняться на вершину горы. Какую часть кабинок вы встретите по дороге наверх?",img:"http://cs613418.vk.me/v613418333/c354/hf_HMl5_1qM.jpg",answers:["Половину","Четверть","Все кабинки","Три четверти"],right:"Все кабинки",explain:"Вы встретите все кабинки, в которых нет вас."},{desc:"Вы едете в машине, у вас в руке воздушный шарик, наполненный гелием. Окна закрыты. Если вы надавите на педаль газа, что произойдет с шариком?",img:"http://cs613418.vk.me/v613418333/c35b/QI6XvRo4ifc.jpg",answers:["Наклонится вперед","Наклонится назад","Останется на месте"],right:"Наклонится вперед",explain:"Газ в шарике имеет меньшую плотность, чем воздух. Когда воздух в машине начнет смещаться назад, шарик сместится вперед."},{desc:"Представьте, что вы уменьшились до размеров пятирублевой монеты и вас посадили в миксер. Сейчас миксер включат, и нож начнет вращаться. Что вы предпримите для спасения?",img:"http://cs613418.vk.me/v613418333/c362/Wjai8ZPXDho.jpg",answers:["Найду укромное место, куда не достают лопасти ножа","Найду укромное место, куда не достают лопасти ножа","В такой ситуации ничего предпринимать не буду"],right:"В такой ситуации ничего предпринимать не буду",explain:"Если вы уменьшитесь до размеров пятирублевой монеты, ваша плотность возрастет настолько, что ножи миксера просто разрушатся о вас, не причинив никакого вреда."}]}),define("vm/question",["ko","model/questions"],function(e,t){function i(){for(var n=0;n<t.length;n++){var r=t[n];for(var i=0;i<r.answers.length;i++)r.answers[i]={desc:r.answers[i]},r.answers[i].isSelected=e.observable(!1)}}console.log("questionViewModel");var n="1:00",r=!1;i();var s={isVisible:e.observable(!1),currentQuestion:e.observable(),questions:t,index:e.observable(),time:e.observable(),score:0,elapsedTime:0,tick:function(){if(this.time()=="1:00")this.time("0:59");else if(this.time()=="0:00")this.next();else{var e=this.time().substr(2),t=parseInt(e,10);t--,t<10?this.time("0:0"+t):this.time("0:"+t)}var n=this;r===!0&&setTimeout(function(){n.tick()},1e3)},start:function(){var e=this;this.score=0,setTimeout(function(){e.tick()},1e3),r=!0,this.isVisible(!0),this.index(0),this.time(n),this.currentQuestion(t[this.index()])},next:function(e){if(e!=undefined){var r=t[this.index()].right;if(e.desc===r){this.score++;if(this.time==="1:00")this.elapsedTime+=60;else{var i=this.time().substr(2);this.elapsedTime+=parseInt(i,10)}}}if(this.index()==t.length-1){this.finish();return}this.time(n),this.index(this.index()+1),this.currentQuestion(t[this.index()])},callback:null,finish:function(){r=!1,this.isVisible(!1),this.callback(this.score,this.elapsedTime)}};return s}),define("vm/result",["ko","model/results","js/ajax","js/players"],function(e,t,n,r){console.log("results");var i={isVisible:e.observable(!1),result:e.observable(t[0]),show:function(e,r){var i=this,s=t[e],o=s.name;e=e*1e3+r,require(["vm/main"],function(t){e>t.playerViewModel.score()&&(n.callAjax("upsert",{id:t.playerViewModel.player().id,score:e},function(){},function(e){}),t.playerViewModel.score(e),t.topViewModel.sort())}),VK.api("wall.post",{attachments:"photo-72833562_332846573",message:"Моя должность в Google: "+o+". Заходи, чтобы проверить на какую должность в Google возьмут тебя https://vk.com/app4382885"},function(e){i.result(s),i.isVisible(!0)})},callback:null,again:function(){this.isVisible(!1),this.callback()},invite:function(){VK.callMethod("showInviteBox")}};return i}),define("vm/main",["jquery","vm/top","vm/intro","vm/question","vm/result","vm/top-item","js/players","model/player"],function(e,t,n,r,i,s,o,u){console.log("mainViewModel");var a={playerViewModel:new s(u.playerLoading()),topViewModel:t,introViewModel:n,questionViewModel:r,resultViewModel:i};return o.getOnePlayer(undefined,function(e){a.playerViewModel.set(e),a.topViewModel.myself=a.playerViewModel}),a.topViewModel.isVisible(!0),a.introViewModel.isVisible(!0),e("#spider").fadeIn(500),a.introViewModel.callback=function(){e("#spider").fadeOut(500),a.questionViewModel.start()},a.questionViewModel.callback=function(e,t){a.resultViewModel.show(e,t)},a.resultViewModel.callback=function(){a.introViewModel.isVisible(!0),e("#spider").fadeIn(500)},a}),requirejs.config({paths:{vm:"vm",js:"js",model:"model",ko:"//cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min",koext:"../lib/koext-amd",jquery:"//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min",infuser:"../lib/infuser-amd",TrafficCop:"../lib/TrafficCop",vk:"//vk.com/js/api/xd_connection"}}),require(["vk","ko","koext","vm/main","infuser"],function(e,t,n,r,i){i.defaults.templateUrl="app/view",t.applyBindings(r),VK.init(function(){console.log("vk init success")},function(){},"5.21"),console.log("main")}),define("main",function(){});